
templates > articles 디렉터리 생성 > new.mustache 생성  
  
### new.mustache 
```
{{>layout/header}}

<!-- action에 URL경로 지정 되고, method post방식으로 보낸다. 서버를 위한 거니 둘 다 잘 해라. -->
<form class="container" action="/articles/create" method="post">
    <div class="mb-3">
        <label class="form-label">제목</label>
        <input type="text" class="form-control" name="title">
    </div>

    <div class="mb-3">
        <label class="form-label">내용</label>
        <textarea class="form-control" rows="3" name="content"></textarea>
    </div>

    <button class="submit" class="btn btn-primary">Submit</button>
</form>

{{>layout/header}}
```
  
#### ArticlesController 
```
package com.example.startproject.controller;

import com.example.startproject.dto.ArticleForm;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;

@Controller
public class ArticlesController {

    @GetMapping("/articles/new")
    public String newArticleForm() {
        return "articles/new";
    }

    @PostMapping("/articles/create")
    public String createArticle(ArticleForm form) {
        System.out.println(form.toString());
        return "";
    }
}
```
  
패키지 생성  
com.example.startproject.dto 로  
startproject 패키지 아래 dto 생성  
  
GetMapping : 보이게 주소 해서 보냄  
PostMapping: 데이터 받아서 전송하잖아 그건 URL아니잖아. 그게 포스트  
  
화면상 에러지만 로그로 ArticleForm{title='asd', content='asasdadasdads'} 뜸  
  
*** 
  
### JDBC 

#### application.properties 
```
spring.application.name=startproject
server.servlet.encoding.force=true
spring.h2.console.enabled=true
```
  
#### new.mustache 
```
{{>layout/header}}

<!-- action에 URL경로 지정 되고, method post방식으로 보낸다. 서버를 위한 거니 둘 다 잘 해라. -->
<form class="container" action="/articles/create" method="post">
    <div class="mb-3">
        <label class="form-label">제목</label>
        <input type="text" class="form-control" name="title">
    </div>

    <div class="mb-3">
        <label class="form-label">내용</label>
        <textarea class="form-control" rows="3" name="content"></textarea>
    </div>

    <button class="submit" class="btn btn-primary">Submit</button>
</form>

{{>layout/header}}
```
  
#### ArticleRepository 인터페이스 (com.example.startproject.repository)  
```
package com.example.startproject.repository;

import com.example.startproject.entity.Article;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.data.repository.CrudRepository;

public interface ArticleRepository extends CrudRepository<Article, Long> {}
```
  
#### Article (com.example.startproject.entity) 
```
package com.example.startproject.entity;

import jakarta.persistence.Column;
import jakarta.persistence.Entity;
import jakarta.persistence.GeneratedValue;
import jakarta.persistence.Id;

@Entity
public class Article {
    @Id
    @GeneratedValue
    private Long id;

    @Column
    private String title;
    @Column
    private String content;

    public Article(Long id, String title, String content) {
        this.id = id;
        this.title = title;
        this.content = content;
    }

    @Override
    public String toString() {
        return "Article{" +
                "id=" + id +
                ", title='" + title + '\'' +
                ", content='" + content + '\'' +
                '}';
    }
}
```
  
#### ArticleForm (com.example.startproject.dto) 
```
package com.example.startproject.dto;

import com.example.startproject.entity.Article;

public class ArticleForm {
    private String title;
    private String content;

    public ArticleForm(String title, String content) {
        this.title = title;
        this.content = content;
    }

    @Override
    public String toString() {
        return "ArticleForm{" +
                "title='" + title + '\'' +
                ", content='" + content + '\'' +
                '}';
    }

    public Article toEntity() {
        return new Article(null, title, content);
    }
}
```
  
#### ArticlesController (com.example.startproject.controller) 
```
package com.example.startproject.controller;

import com.example.startproject.dto.ArticleForm;
import com.example.startproject.entity.Article;
import com.example.startproject.repository.ArticleRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;

@Controller
public class ArticlesController {

    @GetMapping("/articles/new")
    public String newArticleForm() {
        return "articles/new";
    }

    @Autowired
    private ArticleRepository articleRepository; //의존성 주입. Autowired 로 객체생성 알아서 매핑 연결 주입

    @PostMapping("/articles/create")
    public String createArticle(ArticleForm form) {
        System.out.println(form.toString());

        Article article = form.toEntity();

        Article saved = articleRepository.save(article);

        return "";
    }
}
```
  
#### 디비 보내기 
jdbc:h2:mem:90937635-caa7-4f9f-88ea-a9d59eb6c633  
뜨는 거 URL에 입력, 커넥트  
  
http://localhost:8080/articles/create  
에서 글자 입력하고  
DB전송과 함께 에러 페이지 넘어갈 거임  
  
http://localhost:8080/h2-console/login.do?jsessionid=33e49a9421e8ed995640bde545f23f91  
여기서 디비 올라간 거 잘 뜰 거임.  
  
저번 시간 이어서 한 것.  
  
